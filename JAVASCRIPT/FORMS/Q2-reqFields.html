<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Required Fields</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <style>
    .form-control:focus {
        box-shadow: 0 0 0 0.2rem rgba(25, 135, 84, 0.25);
    }
    </style>

  </head>
  <body>
    <div class="container d-flex justify-content-center align-items-center vh-100">
  <div class="card shadow-lg p-4" style="width: 400px;">
    <h4 class="text-center mb-4">Create Account</h4>

    <form id="form" class="d-flex flex-column gap-3">

      <div>
        <input type="text" class="form-control" name="name" placeholder="Full Name">
        <div class="invalid-feedback"></div>
      </div>

      <div>
        <input type="email" id="mail" class="form-control" name="email" placeholder="Email Address">
        <div class="invalid-feedback"></div>
      </div>

      <div>
        <input type="password" id="psw" class="form-control" name="text" placeholder="Password">
        <div class="invalid-feedback"></div>
      </div>

      <button id="submitBtn" class="btn btn-success w-100">
        <span id="btnText">Submit</span>
        <span id="loader" class="spinner-border spinner-border-sm ms-2 d-none"></span>
      </button>

    </form>
  </div>
</div>


    <script>
        const form=document.getElementById("form");
        const inputs=form.querySelectorAll("input");
        const btn=document.getElementById("submitBtn");
        const loader = document.getElementById("loader");
        const btnText = document.getElementById("btnText");
    
        let mailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        let pswRegex=/^.{6,}$/;


        
        form.addEventListener("submit",(event) => {
            event.preventDefault();

            let isValid=true;
            
            inputs.forEach((input)=>{
                const error=input.nextElementSibling;

                // required validation
                if(input.value.trim()==="") {
                    showError(input, error, "This field is required");
                    isValid=false;
                    return;
                }

                //email validation
                if(input.type==="email" &&!mailRegex.test(input.value)) {
                    showError(input, error, "Enter valid email");
                    isValid=false;
                    return;
                }
                if(input.type==="password" &&!pswRegex.test(input.value)) {
                    showError(input, error, "Minimum 6 characters are required");
                    isValid=false;
                    return;
                }
                showSuccess(input,error)
            });
             
            if(isValid) {
                loader.classList.remove("d-none");
                btn.disabled=true;
                btnText.textContent = "Submitting...";

                setTimeout(() => {
                    alert("success");
                    form.reset();
                    clearStyles();

                    // Hide loader
                    loader.classList.add("d-none");
                    btn.disabled = false;
                    btnText.textContent = "Submit";
                }, 3000);
            }
            
        });

    function showError(input, errorElement, message) {
        errorElement.textContent= "⚠️" + message;
        input.classList.remove("is-valid");
        input.classList.add("is-invalid");
    }

    function showSuccess(input,errorElement) {
        errorElement.textContent="";
        input.classList.remove("is-invalid");
        input.classList.add("is-valid");
    }

    function clearStyles() {
        inputs.forEach(input => {
            input.classList.remove("is-valid", "is-invalid");
        });
    }
    </script>
  </body>
</html>
